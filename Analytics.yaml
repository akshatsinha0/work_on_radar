openapi: 3.0.3
info:
  title: POCM Analytics Platform
  version: 2.1.0
  description: |
    Analytics platform for POCM's microfluidics e-commerce ecosystem.
    Processes in-future substantial events daily from well-coupled microservices across customer journey,
    inventory management, biomedical device usage, and supply chain operations.
    
    *Real-time Processing*: Will hope upto sub-100ms event ingestion with immediate dashboard updates
    *Data Lake Integration*: Automatic archival to S3-compatible storage for ML training
    *Compliance*: HIPAA-ready for medical device data (data privacy)
    *Multi-tenant*: Supports B2B customers with isolated analytics namespaces
    *ML Pipeline*: Automated anomaly detection for device performance and user behavior
    
    *Event Categories*:
    - Customer Journey: Cart, checkout, payment, support interactions
    - Device Analytics: Patch usage patterns, sensor readings, efficacy metrics
    - Supply Chain: Inventory levels, manufacturing batches, quality control
    - Business Intelligence: Revenue attribution, cohort analysis, predictive modeling
    
  contact:
    name: POCM Analytics Engineering
    email: analytics-platform@example.com
  license:
    name: Proprietary
    url: https://our_website_link.com/platform-license

servers:
  - url: https://analytics-api.our_future_website_link.com/v2
    description: Primary production cluster (Mumbai)
  - url: https://analytics-api-blr.our_future_website_link.com/v2
    description: Secondary cluster (Bangalore)
  - url: https://analytics-staging.our_future_website_link.com/v2
    description: Staging environment
  - url: https://analytics-dev.our_future_website_link.com/v2
    description: Development environment

security:
  - bearerAuth: []
  - apiKeyAuth: []

tags:
  - name: Ingestion
    description: High-throughput event ingestion with batching support
  - name: Query
    description: Real-time analytics queries with caching and aggregation
  - name: Streaming
    description: WebSocket streams for live dashboard updates
  - name: Batch
    description: Bulk operations for data migration and backfill
  - name: ML
    description: Machine learning model inference and training data
  - name: Compliance
    description: Data governance and audit trail endpoints
  - name: Health
    description: Service health, metrics, and operational monitoring

paths:
  /analytics/ingest:
    post:
      tags: [Ingestion]
      summary: Ingest single analytics event
      description: |
        High-performance event ingestion endpoint handling so manyevents per second.
        Automatically routes to appropriate data pipelines based on event type.
        Supports real-time fraud detection for payment events and device anomaly detection.
        
        *Performance*: <50ms p95 latency, might integrate auto-scaling based on traffic
        *Reliability*: Circuit breaker protection, automatic retries, dead letter queues
        *Monitoring*: Real-time metrics, alerting on ingestion failures or data quality issues
      parameters:
        - name: Idempotency-Key
          in: header
          description: Optional idempotency key for duplicate prevention
          schema:
            type: string
            pattern: '^[a-zA-Z0-9\-_]{1,255}$'
            example: "req_1234567890abcdef"
        - name: Traceparent
          in: header
          description: W3C trace context for distributed tracing
          schema:
            type: string
            example: "00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestEnvelope'
            examples:
              cart_event:
                summary: Cart Event Example
                value:
                  type: cart
                  occurred_at: "2025-08-10T18:45:00Z"
                  producer: cart-service
                  source_service: cart-api
                  user_id: "user_12345"
                  session_id: "sess_abcdef123456"
                  trace_id: "trace_987654321"
                  data:
                    cart_id: "CART_APOLLO_MUM_78901"
                    healthcare_provider_id: "APOLLO_MUMBAI_ENDO_001"
                    prescription_id: "RX_2025_DIABETES_001234"
                    items_added:
                      - product_id: "NFLX_INSULIN_PATCH_001"
                        quantity: 30
                        price: 1249.50
                        batch_number: "BATCH_20250810_MUM"
                        regulatory_status: "FDA_APPROVED"
                        patient_specific: true
                        dosage_strength: "rapid_acting_insulin_2_units"
                    cart_total_value: 37485.00
                    currency: "INR"
                    device_platform: "healthcare_portal"
                    clinical_context:
                      patient_age_group: "adult"
                      medical_condition: "type_1_diabetes"
                      treatment_duration: "3_months"
                      prescribing_physician: "Dr_Rajesh_Endocrinologist"
              payment_event:
                summary: Payment Event Example
                value:
                  type: payment
                  occurred_at: "2025-08-10T18:50:00Z"
                  producer: payment-service
                  source_service: payment-gateway
                  user_id: "user_12345"
                  order_id: "ORDER_789"
                  data:
                    transaction_id: "TXN_ABC123"
                    payment_gateway: "razorpay"
                    payment_method: "credit_card"
                    payment_status: "captured"
                    amount: 59.98
                    currency: "INR"
      responses:
        '200':
          description: Event ingested successfully
          headers:
            X-Request-Id:
              description: Request correlation ID
              schema:
                type: string
            X-RateLimit-Limit:
              description: Request limit per window
              schema:
                type: integer
            X-RateLimit-Remaining:
              description: Remaining requests in window
              schema:
                type: integer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestResponse'
              examples:
                success:
                  value:
                    event_id: "evt_1234567890abcdef"
                    status: "ingested"
                    deduped: false
                    received_at: "2025-08-10T18:45:01Z"
        '202':
          description: Event accepted for async processing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestResponse'
        '400':
          description: Invalid request payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                validation_error:
                  value:
                    type: "https://our_website_link.com/errors/validation"
                    title: "Validation Error"
                    status: 400
                    detail: "Request payload validation failed"
                    errors:
                      - field: "data.amount"
                        message: "must be a positive number"
        '409':
          description: Idempotency conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retry
              schema:
                type: integer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /analytics/ingest/batch:
    post:
      tags: [Batch]
      summary: Bulk ingest analytics events
      description: |
        High-volume batch ingestion for data imports and migrations.
        Processes up to genuine number of events per request with parallel processing.
        Includes data validation, deduplication, and partial failure handling.
        
        *Use Cases*: Historical data migration, ETL pipelines, partner integrations
        *Performance*: Processes different events in less time
        *Reliability*: Transactional processing with rollback on critical failures
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [events, batch_id]
              properties:
                batch_id:
                  type: string
                  description: Unique identifier for this batch operation
                  example: "batch_2025_08_10_001"
                events:
                  type: array
                  items:
                    $ref: '#/components/schemas/IngestEnvelope'
                  minItems: 1
                  maxItems: 10000
                  description: Array of events to process
                options:
                  type: object
                  properties:
                    validate_only:
                      type: boolean
                      default: false
                      description: Validate events without persisting
                    ignore_duplicates:
                      type: boolean
                      default: true
                      description: Skip duplicate events based on idempotency keys
                    parallel_processing:
                      type: boolean
                      default: true
                      description: Enable parallel processing for faster throughput
      responses:
        '202':
          description: Batch accepted for processing
          content:
            application/json:
              schema:
                type: object
                properties:
                  batch_id:
                    type: string
                    example: "batch_2025_08_10_001"
                  status:
                    type: string
                    enum: [accepted, processing, completed, failed]
                    example: "accepted"
                  total_events:
                    type: integer
                    example: 5000
                  estimated_completion:
                    type: string
                    format: date-time
                    example: "2025-08-10T18:47:00Z"
                  tracking_url:
                    type: string
                    format: uri
                    example: "https://analytics-api.our_future_website_link.com/v2/batch/batch_2025_08_10_001/status"

  /analytics/batch/{batch_id}/status:
    get:
      tags: [Batch]
      summary: Get batch processing status
      parameters:
        - name: batch_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Batch status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  batch_id:
                    type: string
                  status:
                    type: string
                    enum: [accepted, processing, completed, failed, cancelled]
                  progress:
                    type: object
                    properties:
                      processed:
                        type: integer
                      total:
                        type: integer
                      success_count:
                        type: integer
                      error_count:
                        type: integer
                      duplicate_count:
                        type: integer
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        event_index:
                          type: integer
                        error_code:
                          type: string
                        error_message:
                          type: string

  /analytics/stream:
    get:
      tags: [Streaming]
      summary: Real-time event stream
      description: |
        WebSocket endpoint for real-time analytics dashboard updates.
        Streams filtered events based on subscription criteria.
        Supports multiple concurrent connections with rate limiting.
        
        *Connection Limit*: 50 concurrent connections per API key
        *Message Rate*: Up to 100 events per second per connection
        *Filtering*: Real-time server-side filtering by event type, user, or custom criteria
      parameters:
        - name: filter
          in: query
          description: Event filter expression
          schema:
            type: string
            example: "type:payment AND status:completed"
        - name: buffer_size
          in: query
          description: Client buffer size for batching
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
      responses:
        '101':
          description: WebSocket connection established
        '400':
          description: Invalid filter expression
        '429':
          description: Connection limit exceeded

  /analytics/events:
    get:
      tags: [Query]
      summary: Analytics query engine
      description: |
        Query interface with filtering, aggregation, and caching.
        Supports complex analytical queries across billions of events with sub-second response times.
        Includes automatic query optimization and result caching for frequently accessed data.
      parameters:
        - name: type
          in: query
          description: Filter by event type(s)
          schema:
            type: array
            items:
              $ref: '#/components/schemas/EventType'
          style: form
          explode: false
        - name: user_id
          in: query
          description: Filter by user ID
          schema:
            type: string
        - name: order_id
          in: query
          description: Filter by order ID
          schema:
            type: string
        - name: from
          in: query
          description: Start time filter (ISO 8601)
          schema:
            type: string
            format: date-time
        - name: to
          in: query
          description: End time filter (ISO 8601)
          schema:
            type: string
            format: date-time
        - name: limit
          in: query
          description: Maximum number of events to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 100
        - name: cursor
          in: query
          description: Pagination cursor for keyset pagination
          schema:
            type: string
        - name: sort
          in: query
          description: Sort order
          schema:
            type: string
            enum: [occurred_at_desc, occurred_at_asc]
            default: occurred_at_desc
      responses:
        '200':
          description: Events retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventsResponse'
        '400':
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /analytics/events/{id}:
    get:
      tags: [Query]
      summary: Get single event by ID
      parameters:
        - name: id
          in: path
          required: true
          description: Event ID
          schema:
            type: string
      responses:
        '200':
          description: Event found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /analytics/ml/predict:
    post:
      tags: [ML]
      summary: Real-time ML predictions
      description: |
        Machine learning inference endpoint for real-time predictions.
        Supports customer lifetime value, churn prediction, device failure prediction,
        and personalized product recommendations based on usage patterns.
        
        *Models Available*:
        - Customer churn prediction (accuracy: whatEver-traIned-moDel-USED)
        - Device failure prediction (precision: whatEver-traIned-moDel-USED)
        - Revenue forecasting (MAPE: whatEver-traIned-moDel-USED)
        - Personalization engine (CTR improvement: whatEver-traIned-moDel-USED)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [model_name, features]
              properties:
                model_name:
                  type: string
                  enum: [churn_prediction, device_failure, revenue_forecast, personalization]
                  example: "churn_prediction"
                features:
                  type: object
                  description: Feature vector for prediction
                  example:
                    user_id: "user_12345"
                    days_since_last_order: 45
                    total_orders: 12
                    avg_order_value: 2500.00
                    device_usage_frequency: 0.85
                    support_tickets: 2
                options:
                  type: object
                  properties:
                    explain:
                      type: boolean
                      default: false
                      description: Include prediction explanation
                    confidence_threshold:
                      type: number
                      minimum: 0
                      maximum: 1
                      default: 0.7
      responses:
        '200':
          description: Prediction completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  prediction:
                    type: number
                    description: Prediction score or value
                    example: 0.23
                  confidence:
                    type: number
                    description: Model confidence score
                    example: 0.87
                  explanation:
                    type: object
                    description: Feature importance and reasoning
                    properties:
                      top_features:
                        type: array
                        items:
                          type: object
                          properties:
                            feature:
                              type: string
                            importance:
                              type: number
                  model_version:
                    type: string
                    example: "v2.3.1"

  /analytics/compliance/audit:
    get:
      tags: [Compliance]
      summary: Data access audit trail
      description: |
        Comprehensive audit trail for data access and modifications.
        Required for HIPAA compliance when handling medical device data.
        Tracks all data access, modifications, and deletions with full attribution.
      parameters:
        - name: user_id
          in: query
          description: Filter by user ID
          schema:
            type: string
        - name: data_type
          in: query
          description: Filter by data type
          schema:
            type: string
            enum: [pii, medical, financial, device_data]
        - name: action
          in: query
          description: Filter by action type
          schema:
            type: string
            enum: [read, write, delete, export]
        - name: date_from
          in: query
          schema:
            type: string
            format: date
        - name: date_to
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Audit trail retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  audit_entries:
                    type: array
                    items:
                      type: object
                      properties:
                        timestamp:
                          type: string
                          format: date-time
                        user_id:
                          type: string
                        action:
                          type: string
                        resource:
                          type: string
                        ip_address:
                          type: string
                        user_agent:
                          type: string
                        data_classification:
                          type: string
                        compliance_flags:
                          type: array
                          items:
                            type: string

  /analytics/compliance/gdpr/export:
    post:
      tags: [Compliance]
      summary: GDPR data export
      description: |
        Export all user data for GDPR compliance requests.
        Generates comprehensive data package including analytics events,
        derived insights, and ML model interactions.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, request_id]
              properties:
                user_id:
                  type: string
                  description: User ID for data export
                request_id:
                  type: string
                  description: GDPR request tracking ID
                include_derived_data:
                  type: boolean
                  default: true
                  description: Include ML predictions and analytics insights
                format:
                  type: string
                  enum: [json, csv, xml]
                  default: json
      responses:
        '202':
          description: Export request accepted
          content:
            application/json:
              schema:
                type: object
                properties:
                  export_id:
                    type: string
                  estimated_completion:
                    type: string
                    format: date-time
                  download_url:
                    type: string
                    format: uri
                    description: Available after completion

  /health:
    get:
      tags: [Health]
      summary: Comprehensive health check
      description: |
        Multi-layer health check including database connectivity, cache status,
        ML model availability, and downstream service dependencies.
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"
                  timestamp:
                    type: string
                    format: date-time

  /ready:
    get:
      tags: [Health]
      summary: Readiness check
      description: Readiness check for Kubernetes probes
      responses:
        '200':
          description: Service is ready
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ready"
                  dependencies:
                    type: object
                    properties:
                      database:
                        type: string
                        example: "connected"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT authentication with role-based access control.
        Includes claims for data access levels, geographic restrictions,
        and compliance requirements (HIPAA, GDPR).
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        Service-to-service API key authentication.
        Rate limited based on service tier and usage patterns.
        Includes automatic key rotation and usage analytics.
    deviceAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Medical device authentication for direct event reporting.
        Includes device identity verification, batch tracking,
        and tamper-evident logging for regulatory compliance.

  schemas:
    EventType:
      type: string
      enum: [
        # Core E-commerce Events
        cart, checkout, payment, notification, logistics, user, inventory, feedback, search,
        # Marketing & Growth Events  
        recommendation, promotion, affiliate, subscription, support, review, wishlist, comparison, abandonment, referral, loyalty,
        # Microfluidics Device Events
        device_activation, patch_application, sensor_reading, dosage_delivery, device_removal, calibration,
        # Medical & Compliance Events
        adverse_event, efficacy_measurement, patient_outcome, clinical_data, regulatory_report,
        # Supply Chain & Manufacturing Events
        batch_production, quality_control, sterilization, packaging, distribution, recall,
        # B2B & Healthcare Provider Events
        provider_onboarding, bulk_order, training_completion, certification, audit_trail,
        # Analytics Events
        ml_prediction, anomaly_detection, cohort_analysis, a_b_test, personalization
      ]
      description: |
        Comprehensive event taxonomy for POCM's microfluidics e-commerce platform.
        Covers entire ecosystem from device manufacturing to patient outcomes.
        
        *Device Lifecycle*: activation → application → monitoring → removal
        *Medical Compliance*: adverse events, efficacy tracking, regulatory reporting
        *Supply Chain*: batch tracking, quality control, distribution monitoring
        *Business Intelligence*: ML predictions, cohort analysis, experimentation

    IngestEnvelope:
      type: object
      required: [type, data, occurred_at]
      properties:
        type:
          $ref: '#/components/schemas/EventType'
        data:
          oneOf:
            - $ref: '#/components/schemas/CartEvent'
            - $ref: '#/components/schemas/CheckoutEvent'
            - $ref: '#/components/schemas/PaymentEvent'
            - $ref: '#/components/schemas/NotificationEvent'
            - $ref: '#/components/schemas/LogisticsEvent'
            - $ref: '#/components/schemas/UserEvent'
            - $ref: '#/components/schemas/InventoryEvent'
            - $ref: '#/components/schemas/FeedbackEvent'
            - $ref: '#/components/schemas/SearchEvent'
            - $ref: '#/components/schemas/RecommendationEvent'
            - $ref: '#/components/schemas/PromotionEvent'
            - $ref: '#/components/schemas/AffiliateEvent'
            - $ref: '#/components/schemas/SubscriptionEvent'
            - $ref: '#/components/schemas/SupportEvent'
            - $ref: '#/components/schemas/ReviewEvent'
            - $ref: '#/components/schemas/WishlistEvent'
            - $ref: '#/components/schemas/ComparisonEvent'
            - $ref: '#/components/schemas/AbandonmentEvent'
            - $ref: '#/components/schemas/ReferralEvent'
            - $ref: '#/components/schemas/LoyaltyEvent'
          discriminator:
            propertyName: type
            mapping:
              cart: '#/components/schemas/CartEvent'
              checkout: '#/components/schemas/CheckoutEvent'
              payment: '#/components/schemas/PaymentEvent'
              notification: '#/components/schemas/NotificationEvent'
              logistics: '#/components/schemas/LogisticsEvent'
              user: '#/components/schemas/UserEvent'
              inventory: '#/components/schemas/InventoryEvent'
              feedback: '#/components/schemas/FeedbackEvent'
              search: '#/components/schemas/SearchEvent'
              recommendation: '#/components/schemas/RecommendationEvent'
              promotion: '#/components/schemas/PromotionEvent'
              affiliate: '#/components/schemas/AffiliateEvent'
              subscription: '#/components/schemas/SubscriptionEvent'
              support: '#/components/schemas/SupportEvent'
              review: '#/components/schemas/ReviewEvent'
              wishlist: '#/components/schemas/WishlistEvent'
              comparison: '#/components/schemas/ComparisonEvent'
              abandonment: '#/components/schemas/AbandonmentEvent'
              referral: '#/components/schemas/ReferralEvent'
              loyalty: '#/components/schemas/LoyaltyEvent'
        occurred_at:
          type: string
          format: date-time
          description: When the event occurred (ISO 8601)
          example: "2025-08-10T18:45:00Z"
        producer:
          type: string
          description: Service that produced the event
          example: "cart-service"
        source_service:
          type: string
          description: Specific service component
          example: "cart-api"
        user_id:
          type: string
          description: User identifier (optional shortcut for envelope extraction)
          example: "user_12345"
        order_id:
          type: string
          description: Order identifier (optional shortcut for envelope extraction)
          example: "ORDER_789"
        session_id:
          type: string
          description: Session identifier
          example: "sess_abcdef123456"
        trace_id:
          type: string
          description: Distributed tracing ID
          example: "trace_987654321"
        idempotency_key:
          type: string
          pattern: '^[a-zA-Z0-9\-_]{1,255}$'
          description: Idempotency key for duplicate prevention
          example: "req_1234567890abcdef"

    # Shared Components
    Money:
      type: object
      required: [amount, currency]
      properties:
        amount:
          type: number
          format: double
          minimum: 0
          example: 29.99
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "INR"

    Geo:
      type: object
      properties:
        country:
          type: string
          pattern: '^[A-Z]{2}$'
          example: "US"
        region:
          type: string
          example: "Maharashtra"
        city:
          type: string
          example: "Mumbai"

    Device:
      type: object
      properties:
        platform:
          type: string
          enum: [web, mobile_app, tablet, desktop]
          example: "web"
        user_agent:
          type: string
          maxLength: 500
          example: "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
        screen_resolution:
          type: string
          pattern: '^\d+x\d+$'
          example: "1920x1080"

    # Microfluidics Device Event Schemas
    DeviceActivationEvent:
      type: object
      required: [device_id, batch_number, activation_method]
      properties:
        device_id:
          type: string
          pattern: '^NFLX_[A-Z0-9]{8}$'
          example: "NFLX_A1B2C3D4"
          description: Unique device identifier with manufacturing batch trace
        batch_number:
          type: string
          pattern: '^BATCH_\d{8}_[A-Z]{3}$'
          example: "BATCH_20250810_MUM"
          description: Manufacturing batch for quality control and recall tracking
        activation_method:
          type: string
          enum: [qr_scan, nfc_tap, manual_entry, app_pairing]
          example: "qr_scan"
        patient_id:
          type: string
          description: Anonymized patient identifier for medical tracking
          example: "PT_HASH_ABC123"
        healthcare_provider:
          type: string
          description: Prescribing healthcare provider or institution
          example: "Apollo_Hospital_Mumbai"
        prescription_id:
          type: string
          description: Associated prescription or treatment plan
          example: "RX_2025_001234"
        device_type:
          type: string
          enum: [insulin_patch, pain_relief_patch, hormone_patch_microsizefibers, vaccine_patch, diagnostic_sensor]
          example: "insulin_patch"
        activation_location:
          $ref: '#/components/schemas/Geo'
        device_metadata:
          type: object
          properties:
            firmware_version:
              type: string
              example: "v2.1.3"
            manufacturing_date:
              type: string
              format: date
              example: "2025-08-05"
            expiry_date:
              type: string
              format: date
              example: "2025-11-05"
            storage_conditions:
              type: object
              properties:
                temperature_range:
                  type: string
                  example: "2-8°C"
                humidity_exposure:
                  type: number
                  example: 45.2

    PatchApplicationEvent:
      type: object
      required: [device_id, application_site, application_timestamp]
      properties:
        device_id:
          type: string
          example: "NFLX_A1B2C3D4"
        application_site:
          type: string
          enum: [upper_arm, abdomen, thigh, back, chest]
          example: "upper_arm"
        application_timestamp:
          type: string
          format: date-time
          example: "2025-08-10T09:30:00Z"
        skin_preparation:
          type: object
          properties:
            cleaned:
              type: boolean
              example: true
            hair_removed:
              type: boolean
              example: true
            skin_condition:
              type: string
              enum: [normal, dry, oily, sensitive, irritated]
              example: "normal"
        application_pressure:
          type: number
          description: Applied pressure in Pascals
          example: 1500.0
        adhesion_quality:
          type: string
          enum: [excellent, good, fair, poor]
          example: "excellent"
        patient_comfort_score:
          type: integer
          minimum: 1
          maximum: 10
          example: 8
        environmental_conditions:
          type: object
          properties:
            temperature:
              type: number
              example: 24.5
            humidity:
              type: number
              example: 60.2
            altitude:
              type: number
              example: 14.0

    SensorReadingEvent:
      type: object
      required: [device_id, sensor_type, reading_value, timestamp]
      properties:
        device_id:
          type: string
          example: "NFLX_A1B2C3D4"
        sensor_type:
          type: string
          enum: [glucose, insulin_level, ph, temperature, pressure, flow_rate, biomarker]
          example: "glucose"
        reading_value:
          type: number
          description: Sensor reading in appropriate units
          example: 120.5
        unit_of_measurement:
          type: string
          example: "mg/dL"
        timestamp:
          type: string
          format: date-time
          example: "2025-08-10T10:15:00Z"
        reading_quality:
          type: string
          enum: [high, medium, low, error]
          example: "high"
        calibration_status:
          type: string
          enum: [calibrated, needs_calibration, calibration_expired]
          example: "calibrated"
        baseline_deviation:
          type: number
          description: Deviation from patient baseline in percentage
          example: 15.2
        trend_direction:
          type: string
          enum: [rising, falling, stable, fluctuating]
          example: "stable"
        alert_triggered:
          type: boolean
          example: false
        clinical_significance:
          type: string
          enum: [normal, attention_needed, critical, emergency]
          example: "normal"

    DosageDeliveryEvent:
      type: object
      required: [device_id, substance_delivered, dosage_amount, delivery_timestamp]
      properties:
        device_id:
          type: string
          example: "NFLX_A1B2C3D4"
        substance_delivered:
          type: string
          example: "insulin_rapid_acting"
        dosage_amount:
          type: number
          description: Amount delivered in appropriate units
          example: 2.5
        unit_of_measurement:
          type: string
          example: "units"
        delivery_timestamp:
          type: string
          format: date-time
          example: "2025-08-10T10:30:00Z"
        delivery_method:
          type: string
          enum: [micro_needle, transdermal, iontophoresis, ultrasonic]
          example: "micro_needle"
        delivery_rate:
          type: number
          description: Delivery rate in units per minute
          example: 0.5
        delivery_pressure:
          type: number
          description: Delivery pressure in Pascals
          example: 2000.0
        delivery_success:
          type: boolean
          example: true
        patient_response:
          type: object
          properties:
            immediate_reaction:
              type: string
              enum: [none, mild_irritation, moderate_reaction, severe_reaction]
              example: "none"
            pain_level:
              type: integer
              minimum: 0
              maximum: 10
              example: 1
            absorption_rate:
              type: string
              enum: [fast, normal, slow, impaired]
              example: "normal"
        reservoir_level_remaining:
          type: number
          description: Remaining substance in reservoir (percentage)
          example: 75.5

    AdverseEventReport:
      type: object
      required: [device_id, event_type, severity, reporter_type]
      properties:
        device_id:
          type: string
          example: "NFLX_A1B2C3D4"
        event_type:
          type: string
          enum: [skin_irritation, allergic_reaction, device_malfunction, dosage_error, infection, other]
          example: "skin_irritation"
        severity:
          type: string
          enum: [mild, moderate, severe, life_threatening]
          example: "mild"
        reporter_type:
          type: string
          enum: [patient, healthcare_provider, caregiver, manufacturer]
          example: "patient"
        event_description:
          type: string
          maxLength: 2000
          example: "Mild redness around patch application site, resolved within 2 hours"
        onset_time:
          type: string
          format: date-time
          example: "2025-08-10T11:00:00Z"
        resolution_time:
          type: string
          format: date-time
          nullable: true
          example: "2025-08-10T13:00:00Z"
        medical_intervention_required:
          type: boolean
          example: false
        regulatory_reporting_required:
          type: boolean
          example: false
        batch_investigation_triggered:
          type: boolean
          example: false
        patient_demographics:
          type: object
          properties:
            age_group:
              type: string
              enum: [pediatric, adult, geriatric]
              example: "adult"
            gender:
              type: string
              enum: [male, female, other, not_specified]
              example: "female"
            medical_conditions:
              type: array
              items:
                type: string
              example: ["diabetes_type_1", "hypertension"]

    # Core E-commerce Event Schemas
    CartEvent:
      type: object
      required: [cart_id]
      properties:
        cart_id:
          type: string
          example: "CART78901"
        action:
          type: string
          enum: [item_added, item_removed, item_updated, cart_viewed, cart_cleared]
          example: "item_added"
        items_added:
          type: array
          items:
            type: object
            required: [product_id, quantity]
            properties:
              product_id:
                type: string
                example: "NFLX_PATCH_001"
              quantity:
                type: integer
                minimum: 1
                example: 2
              price:
                type: number
                format: double
                minimum: 0
                example: 29.99
              category:
                type: string
                example: "microfluidics"
        cart_total:
          $ref: '#/components/schemas/Money'
        cart_abandonment_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT10M23S"
        coupon_code:
          type: string
          example: "SAVE20"
        device:
          $ref: '#/components/schemas/Device'
        geo:
          $ref: '#/components/schemas/Geo'

    CheckoutEvent:
      type: object
      required: [cart_id, checkout_status]
      properties:
        cart_id:
          type: string
          example: "CART78901"
        checkout_status:
          type: string
          enum: [started, completed, abandoned, failed]
          example: "completed"
        total_order_value:
          $ref: '#/components/schemas/Money'
        number_of_items:
          type: integer
          minimum: 1
          example: 3
        applied_discounts:
          type: number
          format: double
          minimum: 0
          example: 5.99
        payment_method:
          type: string
          enum: [credit_card, debit_card, upi, paytm, google_pay, bank_transfer, cash_on_delivery]
          example: "upi"
        shipping_region:
          type: string
          example: "Western India"
        checkout_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT5M30S"
        session_id:
          type: string
          example: "sess_checkout_123"

    PaymentEvent:
      type: object
      required: [transaction_id, payment_status, amount, currency]
      properties:
        transaction_id:
          type: string
          example: "TXN_ABC123"
        payment_gateway:
          type: string
          enum: [razorpay, payu, ccavenue, instamojo, cashfree]
          example: "razorpay"
        payment_method:
          type: string
          enum: [credit_card, debit_card, upi, paytm, google_pay, bank_transfer, cash_on_delivery]
          example: "upi"
        payment_status:
          type: string
          enum: [pending, authorized, captured, failed, refunded, partially_refunded, cancelled]
          example: "captured"
        failure_reason:
          type: string
          nullable: true
          example: "insufficient_funds"
        amount:
          type: number
          format: double
          minimum: 0
          example: 59.98
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "INR"
        refund_amount:
          type: number
          format: double
          minimum: 0
          nullable: true
          example: 10.00
        confirmation_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT2S"
        risk_score:
          type: number
          format: double
          minimum: 0
          maximum: 100
          example: 15.5

    NotificationEvent:
      type: object
      required: [notification_type, delivery_status]
      properties:
        notification_type:
          type: string
          enum: [email, sms, push, in_app, webhook]
          example: "email"
        notification_event:
          type: string
          enum: [order_confirmation, shipping_update, payment_receipt, promotion, reminder, welcome]
          example: "order_confirmation"
        delivery_status:
          type: string
          enum: [sent, delivered, opened, clicked, bounced, failed, unsubscribed]
          example: "delivered"
        template_id:
          type: string
          example: "template_order_confirm_v2"
        vendor:
          type: string
          enum: [msg91, netcore, pepipost, firebase, custom]
          example: "msg91"
        language:
          type: string
          pattern: '^[a-z]{2}(-[A-Z]{2})?$'
          example: "en-US"
        trigger_source:
          type: string
          example: "order_service"
        open_rate:
          type: number
          format: double
          minimum: 0
          maximum: 1
          example: 0.85
        click_through_rate:
          type: number
          format: double
          minimum: 0
          maximum: 1
          example: 0.12

    LogisticsEvent:
      type: object
      required: [warehouse_id, delivery_status]
      properties:
        warehouse_id:
          type: string
          example: "WH_MUM_001"
        delivery_partner:
          type: string
          enum: [bluedart, dtdc, delhivery, ecom_express, xpressbees, local_courier]
          example: "bluedart"
        tracking_id:
          type: string
          example: "1Z999AA1234567890"
        delivery_status:
          type: string
          enum: [pending, picked_up, in_transit, out_for_delivery, delivered, failed, returned]
          example: "delivered"
        estimated_delivery:
          type: string
          format: date-time
          example: "2025-08-12T15:00:00Z"
        actual_delivery:
          type: string
          format: date-time
          nullable: true
          example: "2025-08-12T14:30:00Z"
        delivery_region:
          type: string
          example: "Western Region"
        return_status:
          type: string
          enum: [none, requested, approved, in_transit, completed]
          example: "none"
        delivery_delay_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          nullable: true
          example: "PT2H30M"
        delivery_updates:
          type: array
          items:
            type: object
            properties:
              status:
                type: string
              timestamp:
                type: string
                format: date-time
              location:
                type: string

    UserEvent:
      type: object
      required: [action]
      properties:
        action:
          type: string
          enum: [signup, login, logout, profile_update, password_change, email_verification, phone_verification, account_deletion]
          example: "signup"
        user_type:
          type: string
          enum: [guest, registered, premium, business]
          example: "registered"
        login_method:
          type: string
          enum: [email_password, social_google, social_facebook, phone_otp, aadhaar_otp, sso]
          example: "email_password"
        login_count:
          type: integer
          minimum: 0
          example: 15
        last_active:
          type: string
          format: date-time
          example: "2025-08-10T17:30:00Z"
        email_verified:
          type: boolean
          example: true
        mobile_verified:
          type: boolean
          example: false
        referral_code:
          type: string
          nullable: true
          example: "REF123ABC"
        avg_session_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT25M"
        device:
          $ref: '#/components/schemas/Device'
        geo:
          $ref: '#/components/schemas/Geo'

    InventoryEvent:
      type: object
      required: [product_id, warehouse_id, stock_level]
      properties:
        product_id:
          type: string
          example: "NFLX_PATCH_001"
        warehouse_id:
          type: string
          example: "WH_MUM_001"
        stock_level:
          type: integer
          minimum: 0
          example: 150
        action:
          type: string
          enum: [restock, sale, return, adjustment, transfer, reservation]
          example: "sale"
        quantity_changed:
          type: integer
          example: -2
        last_restock:
          type: string
          format: date-time
          example: "2025-08-08T10:00:00Z"
        out_of_stock_frequency:
          type: integer
          minimum: 0
          example: 3
        product_category:
          type: string
          example: "microfluidics"
        avg_turnover_days:
          type: integer
          minimum: 0
          example: 30
        returned_units:
          type: integer
          minimum: 0
          example: 5
        daily_units_sold:
          type: integer
          minimum: 0
          example: 12
        reorder_threshold:
          type: integer
          minimum: 0
          example: 20
        shrinkage_rate:
          type: number
          format: double
          minimum: 0
          maximum: 1
          example: 0.02
        supplier_id:
          type: string
          example: "SUPP_TECH_001"

    FeedbackEvent:
      type: object
      required: [feedback_id, rating, category]
      properties:
        feedback_id:
          type: string
          example: "FB_12345"
        rating:
          type: integer
          minimum: 1
          maximum: 5
          example: 4
        comment:
          type: string
          maxLength: 2000
          example: "Excellent microfluidic patch, precise delivery mechanism!"
        category:
          type: string
          enum: [product, service, delivery, website, support, general]
          example: "product"
        sentiment:
          type: string
          enum: [positive, negative, neutral]
          example: "positive"
        channel:
          type: string
          enum: [website, email, phone, chat, social_media, app]
          example: "website"
        resolved:
          type: boolean
          example: true
        resolution_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          nullable: true
          example: "PT2H15M"
        tags:
          type: array
          items:
            type: string
          example: ["precision", "biocompatibility"]
        helpful_votes:
          type: integer
          minimum: 0
          example: 8

    SearchEvent:
      type: object
      required: [query]
      properties:
        query:
          type: string
          maxLength: 500
          example: "nanofluidic injection patch"
        filters_applied:
          type: array
          items:
            type: object
            properties:
              filter_type:
                type: string
                example: "price_range"
              filter_value:
                type: string
                example: "50-100"
        results_returned:
          type: integer
          minimum: 0
          example: 25
        top_clicked_product:
          type: string
          nullable: true
          example: "NFLX_PATCH_DIABETES_001"
        click_position:
          type: integer
          minimum: 1
          nullable: true
          example: 3
        abandoned_search:
          type: boolean
          example: false
        category_clicked:
          type: string
          nullable: true
          example: "nanofluidics"
        zero_result_flag:
          type: boolean
          example: false
        search_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT45S"
        suggestion_clicked:
          type: boolean
          example: true
        converted_to_order:
          type: boolean
          example: false
        search_type:
          type: string
          enum: [text, voice, image, barcode]
          example: "text"

    RecommendationEvent:
      type: object
      required: [recommendation_type, algorithm]
      properties:
        recommendation_type:
          type: string
          enum: [product, category, brand, similar_users, trending, personalized]
          example: "product"
        algorithm:
          type: string
          enum: [collaborative_filtering, content_based, hybrid, ml_model, rule_based]
          example: "collaborative_filtering"
        recommended_items:
          type: array
          items:
            type: object
            properties:
              item_id:
                type: string
              item_type:
                type: string
              score:
                type: number
                format: double
              position:
                type: integer
        context:
          type: string
          enum: [homepage, product_page, cart, checkout, email, search_results]
          example: "product_page"
        clicked:
          type: boolean
          example: true
        clicked_item_id:
          type: string
          nullable: true
          example: "PROD_REC_001"
        converted:
          type: boolean
          example: false
        model_version:
          type: string
          example: "v2.1.0"

    PromotionEvent:
      type: object
      required: [promotion_id, action]
      properties:
        promotion_id:
          type: string
          example: "PROMO_SUMMER_2025"
        promotion_type:
          type: string
          enum: [discount, bogo, free_delivery, cashback, loyalty_points]
          example: "discount"
        action:
          type: string
          enum: [viewed, clicked, applied, removed, expired]
          example: "applied"
        discount_amount:
          $ref: '#/components/schemas/Money'
        discount_percentage:
          type: number
          format: double
          minimum: 0
          maximum: 100
          nullable: true
          example: 20.0
        minimum_order_value:
          $ref: '#/components/schemas/Money'
        promotion_channel:
          type: string
          enum: [email, website_banner, app_notification, social_media, affiliate]
          example: "website_banner"
        campaign_id:
          type: string
          example: "CAMP_SUMMER_001"

    AffiliateEvent:
      type: object
      required: [affiliate_id, action]
      properties:
        affiliate_id:
          type: string
          example: "AFF_PARTNER_001"
        action:
          type: string
          enum: [click, conversion, commission_earned, payout]
          example: "conversion"
        commission_rate:
          type: number
          format: double
          minimum: 0
          maximum: 1
          example: 0.05
        commission_amount:
          $ref: '#/components/schemas/Money'
        referral_url:
          type: string
          format: uri
          example: "https://our_website_link.com/ref/partner001"
        conversion_value:
          $ref: '#/components/schemas/Money'
        tracking_id:
          type: string
          example: "TRACK_AFF_12345"

    SubscriptionEvent:
      type: object
      required: [subscription_id, action]
      properties:
        subscription_id:
          type: string
          example: "SUB_PREMIUM_001"
        action:
          type: string
          enum: [created, renewed, cancelled, paused, resumed, upgraded, downgraded]
          example: "renewed"
        plan_id:
          type: string
          example: "PLAN_PREMIUM_MONTHLY"
        billing_cycle:
          type: string
          enum: [monthly, quarterly, yearly]
          example: "monthly"
        subscription_value:
          $ref: '#/components/schemas/Money'
        trial_period:
          type: boolean
          example: false
        auto_renewal:
          type: boolean
          example: true
        cancellation_reason:
          type: string
          enum: [price, features, competition, service_quality, other]
          nullable: true
          example: "price"

    SupportEvent:
      type: object
      required: [ticket_id, action]
      properties:
        ticket_id:
          type: string
          example: "TICKET_12345"
        action:
          type: string
          enum: [created, updated, resolved, closed, escalated, reopened]
          example: "resolved"
        category:
          type: string
          enum: [technical, billing, product, delivery, account, general]
          example: "technical"
        priority:
          type: string
          enum: [low, medium, high, urgent]
          example: "medium"
        channel:
          type: string
          enum: [email, chat, phone, ticket_system, social_media]
          example: "chat"
        agent_id:
          type: string
          nullable: true
          example: "AGENT_001"
        resolution_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          nullable: true
          example: "PT2H30M"
        satisfaction_rating:
          type: integer
          minimum: 1
          maximum: 5
          nullable: true
          example: 4

    ReviewEvent:
      type: object
      required: [review_id, product_id, rating]
      properties:
        review_id:
          type: string
          example: "REV_12345"
        product_id:
          type: string
          example: "NFLX_PATCH_001"
        rating:
          type: integer
          minimum: 1
          maximum: 5
          example: 4
        review_text:
          type: string
          maxLength: 5000
          nullable: true
          example: "Excellent microfluidic patch quality and precise delivery mechanism!"
        verified_purchase:
          type: boolean
          example: true
        helpful_votes:
          type: integer
          minimum: 0
          example: 12
        total_votes:
          type: integer
          minimum: 0
          example: 15
        review_status:
          type: string
          enum: [pending, approved, rejected, flagged]
          example: "approved"
        moderation_reason:
          type: string
          nullable: true
          example: "inappropriate_content"

    WishlistEvent:
      type: object
      required: [action]
      properties:
        wishlist_id:
          type: string
          example: "WISH_USER_001"
        action:
          type: string
          enum: [item_added, item_removed, wishlist_shared, item_moved_to_cart]
          example: "item_added"
        product_id:
          type: string
          example: "NFLX_PATCH_001"
        wishlist_size:
          type: integer
          minimum: 0
          example: 5
        shared_with:
          type: array
          items:
            type: string
          example: ["friend@email.com"]
        privacy_setting:
          type: string
          enum: [private, public, friends_only]
          example: "private"

    ComparisonEvent:
      type: object
      required: [products_compared]
      properties:
        comparison_id:
          type: string
          example: "COMP_12345"
        products_compared:
          type: array
          items:
            type: string
          minItems: 2
          example: ["NFLX_PATCH_001", "MFLX_CHIP_002", "NFLX_SENSOR_003"]
        comparison_criteria:
          type: array
          items:
            type: string
          example: ["price", "features", "ratings"]
        selected_product:
          type: string
          nullable: true
          example: "PROD_002"
        comparison_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT3M45S"

    AbandonmentEvent:
      type: object
      required: [abandonment_type, stage]
      properties:
        abandonment_type:
          type: string
          enum: [cart, checkout, search, product_view, registration]
          example: "cart"
        stage:
          type: string
          example: "payment_info"
        abandonment_duration:
          type: string
          pattern: '^PT(\d+H)?(\d+M)?(\d+S)?$'
          description: ISO 8601 duration
          example: "PT15M"
        cart_value:
          $ref: '#/components/schemas/Money'
        items_count:
          type: integer
          minimum: 0
          example: 3
        exit_page:
          type: string
          format: uri
          example: "/checkout/payment"
        recovery_email_sent:
          type: boolean
          example: true

    ReferralEvent:
      type: object
      required: [referrer_id, action]
      properties:
        referrer_id:
          type: string
          example: "USER_REFERRER_001"
        referee_id:
          type: string
          nullable: true
          example: "USER_REFEREE_001"
        referral_code:
          type: string
          example: "REF_ABC123"
        action:
          type: string
          enum: [code_generated, code_shared, signup_via_referral, first_purchase, reward_earned]
          example: "first_purchase"
        reward_type:
          type: string
          enum: [discount, cashback, points, free_product]
          nullable: true
          example: "discount"
        reward_value:
          $ref: '#/components/schemas/Money'
        sharing_channel:
          type: string
          enum: [email, social_media, direct_link, sms]
          nullable: true
          example: "social_media"

    LoyaltyEvent:
      type: object
      required: [action]
      properties:
        loyalty_program_id:
          type: string
          example: "LOYALTY_PREMIUM"
        action:
          type: string
          enum: [points_earned, points_redeemed, tier_upgraded, tier_downgraded, reward_claimed]
          example: "points_earned"
        points_earned:
          type: integer
          minimum: 0
          nullable: true
          example: 100
        points_redeemed:
          type: integer
          minimum: 0
          nullable: true
          example: 500
        current_points_balance:
          type: integer
          minimum: 0
          example: 1250
        tier_level:
          type: string
          enum: [bronze, silver, gold, platinum, diamond]
          example: "gold"
        reward_id:
          type: string
          nullable: true
          example: "REWARD_FREE_DELIVERY"
        expiry_date:
          type: string
          format: date-time
          nullable: true
          example: "2025-12-31T23:59:59Z"

    # Response Schemas
    IngestResponse:
      type: object
      required: [event_id, status, received_at]
      properties:
        event_id:
          type: string
          description: Unique identifier for the ingested event
          example: "evt_1234567890abcdef"
        status:
          type: string
          enum: [ingested, queued, deduped]
          example: "ingested"
        deduped:
          type: boolean
          description: Whether this event was deduplicated
          example: false
        received_at:
          type: string
          format: date-time
          description: When the event was received by the service
          example: "2025-08-10T18:45:01Z"

    Event:
      type: object
      required: [id, type, occurred_at, received_at, data]
      properties:
        id:
          type: string
          example: "evt_1234567890abcdef"
        type:
          $ref: '#/components/schemas/EventType'
        occurred_at:
          type: string
          format: date-time
          example: "2025-08-10T18:45:00Z"
        received_at:
          type: string
          format: date-time
          example: "2025-08-10T18:45:01Z"
        producer:
          type: string
          example: "cart-service"
        source_service:
          type: string
          example: "cart-api"
        user_id:
          type: string
          nullable: true
          example: "user_12345"
        order_id:
          type: string
          nullable: true
          example: "ORDER_789"
        session_id:
          type: string
          nullable: true
          example: "sess_abcdef123456"
        trace_id:
          type: string
          nullable: true
          example: "trace_987654321"
        data:
          type: object
          description: Event-specific payload

    EventsResponse:
      type: object
      required: [items, total, has_more]
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Event'
        total:
          type: integer
          description: Total number of events matching the query
          example: 1500
        has_more:
          type: boolean
          description: Whether there are more events available
          example: true
        next_cursor:
          type: string
          nullable: true
          description: Cursor for the next page of results
          example: "cursor_next_page_token"

    ErrorResponse:
      type: object
      required: [type, title, status]
      properties:
        type:
          type: string
          format: uri
          description: URI identifying the problem type
          example: "https://our_website_link.com/errors/validation"
        title:
          type: string
          description: Short, human-readable summary
          example: "Validation Error"
        status:
          type: integer
          description: HTTP status code
          example: 400
        detail:
          type: string
          description: Human-readable explanation
          example: "Request payload validation failed"
        instance:
          type: string
          format: uri
          description: URI reference identifying the specific occurrence
          example: "/analytics/ingest"
        errors:
          type: array
          description: Field-level validation errors
          items:
            type: object
            properties:
              field:
                type: string
                example: "data.amount"
              message:
                type: string
                example: "must be a positive number"
